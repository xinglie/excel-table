let e=0,t=[],n=window,r=document,i=n.setTimeout,o=encodeURIComponent;function l(){}let f,a=r.head,s=n.performance,u=s.now.bind(s),c="prototype",d=Object[c].toString,h=e=>d.call(e).slice(8,-1),b=e=>"Object"==h(e),p=Array.isArray,m=t=>(t||"_")+e++,g=e=>r.getElementById(e),w=(e,t)=>e.innerHTML=t,y={rootId:m(),error(e){throw e}},v=e=>!e||"object"!=typeof e,k=(e,t,n)=>{if(e&&t&&!(n=e==t))try{n=16==(16&t.compareDocumentPosition(e))}catch(e){}return n},V=e=>{e["\x1ea"]=null},{assign:x,hasOwnProperty:I}=Object,j=a.getAttribute,$=(e,t)=>j.call(e,t),T=(e,t,n)=>{t&&!T[e]&&(T[e]=1,n=r.createElement("style"),w(n,t),a.appendChild(n))},A=(e,t,n,r)=>{try{r=p(t)?e.apply(n,t):e.call(n,t)}catch(e){y.error(e)}return r},B=(e,t)=>e&&I.call(e,t),E=(e,t)=>{let n,r;if(v(t))"\x1e"==(n=t+"")[0]&&(t=e[n]);else for(n in t)r=t[n],r=E(e,r),t[n]=r;return t},C=(e,t)=>t.a-e.a;function N(e,t,n){(n=this).a=[],n.b=t||5,n.c=n.b+(e||20)}x(N[c],{get(e){let t=this.a["\x1e"+e];return t&&(t.a++,t=t.c),t},set(e,t){let n=this,r=n.a,i="\x1e"+e,o=r[i],l=n.b;if(!o){if(r.length>=n.c)for(r.sort(C);l--;)(o=r.pop()).a>0&&n.del(o.o);o={d:e},r.push(o),r[i]=o}o.c=t,o.a=1},del(e){e="\x1e"+e;let t=this.a,n=t[e];n&&(n.a=-1,n.c="",t[e]=null)},has(e){return B(this.a,"\x1e"+e)}});let O={bubbles:!0,cancelable:!0},P=[],Z=(e,t,n,r,i,o)=>{let l={a:r,b:n,c:t,d:e,e(e){r?A(n,e,o):n(e)}};P.push(l),e.addEventListener(t,l.e,i)},_=(e,t,n,r,i)=>{for(let o,l=P.length;l--;)if((o=P[l]).c==t&&o.a==r&&o.d==e&&o.b===n){P.splice(l,1),e.removeEventListener(t,o.e,i);break}},L=new N,S=(e,t,n)=>(L.has(e)?n=L.get(e):(n=A(Function(`return ${e}`)),t&&L.set(e,n)),n),U=decodeURIComponent,M=new N,R=e=>{let t,n,r,i,o,l,f=M.get(e);if(!f){if(i={},-1==(o=e.indexOf("?"))?(t=e,l=""):(t=e.substring(0,o),l=e.substring(o+1)),l)for(o of l.split("&"))[n,r]=o.split("="),i[U(n)]=U(r||"");M.set(e,f={a:t,b:i})}return{path:f.a,params:x({},f.b)}},F=new N,H=(e,t,n)=>(F.has(e)?n=F.get(e):(n=S(e,null),e.includes("\x1e")?E(t,n):F.set(e,n)),n),W=0,q=[],D=()=>{let e,t,n,r=u();try{for(;;){if(e=q[W],n=q[W-1],t=q[W+1],q[W]=null,q[W-1]=null,q[W+1]=null,q[W+2]=null,W+=4,!e){q.length=W=0;break}if(e!=l&&(p(t)?e.apply(n,t):e.call(n,t)),u()-r>8&&q.length>W){i(D);break}}}catch(e){y.error(e),i(D)}},z=(e,t,n,r)=>{if(W||(W=1,i(D)),r)for(let e=q.length-1;e>=W;e-=4)q[e]==r&&(q[e-3]=null,q[e-2]=l,q[e-1]=null,q[e]=null);q.push(n,e,t,r)},G={},J=(e,t)=>{if(e){p(e)||(e=[e]);let n,r,i,o=[],l=[],f=y.paths;for(n of e)(r=n.indexOf("/"))>-1&&!n.startsWith(".")&&(i=n.slice(0,r),n=n.slice(r+1),n=f[i]+n),n.endsWith(".js")||(n+=".js"),G[n]||(G[n]=import(n)),o.push(G[n]);Promise.all(o).then(e=>{for(n of e)l.push(n.default);z(t,l)})}else z(t)};function K(){}let Q,X=(e,t,n,r)=>(K[c]=t[c],r=new K,x(r,n),r.constructor=e,e[c]=r,e),Y=e=>e;let ee,te={},ne=(e,t,n,r)=>{t.includes("\x1e")&&(r=te[e])&&E(r.a,n)},re=(e,t)=>{B(te,e)||(te[e]=t)},ie=e=>e.b||(e.b=m(ee));function oe(e,t){let n=this,r=ie(e);n.id=r,n.root=e,n.c=1,n.b={},n.pId=t,n.a={},re(r,n)}x(oe,{root:()=>Q,all:()=>te,byId:e=>te[e],byNode:e=>te[e.b]}),x(oe[c],{mountView(e,t){let n,r,i,o,l,f=this,{id:a,root:s,pId:u}=f;!f.d&&s&&(f.d=1,f.e=s.innerHTML),f.unmountView(),s&&e&&(n=R(e),i=n.path,f.path=e,o=n.params,ne(u,e,o),f.f=i,(u=o["\x1e"])&&b(u)?o=u:x(o,t),r=f.c,J(i,e=>{if(r==f.c){if(!e)return void 0;l=De(e),i=new e(a,s,f,o,l),f.g=i,Me(i),A(i.init,o,i),z(i.f,o,i),z(()=>{i.g(),i.tmpl||i.h||Ue(i)})}}))},unmountView(){let e=this,{g:t,root:n}=e;e.h=[],t&&(e.g=0,t.c&&(t.c=0,V(t),e.unmountZone(),Me(t,1),n&&e.d&&w(n,e.e))),e.c++},mountVframe(e,t,n){let r,i=this,o=i.id,l=i.b,f=ie(e);return(r=te[f])||(B(l,f)||(i.i=0),l[f]=f,r=new oe(e,o)),r.mountView(t,n),r},mountZone(e){let t,n=this,r=(e=e||n.root).querySelectorAll("[mx5-view]");for(t of r)t.a||(t.a=1,n.mountVframe(t,$(t,"mx5-view")))},unmountVframe(e,t){let n,r;var i,o,l;e=e?this.b[t?e:e.b]:this.id,(n=te[e])&&(n.unmountView(),r=n.pId,(o=te[i=e])&&(delete te[i],(l=o.root).a=0,l.b=0,o.id=o.root=o.pId=o.b=null),(n=te[r])&&B(n.b,e)&&(delete n.b[e],n.i=0))},unmountZone(e){let t,n,r,i=this;for(t in i.b)(r=e?(n=te[t])&&k(n.root,e):1)&&i.unmountVframe(t,1)}});let le=new N(30,10),fe=/([\w\-]+)\x1e(\x1e)?([^(]+)\(([\s\S]*?)\)/,ae={},se={},ue={};let ce=(e,n)=>{let r,i,o,l,a,s,u,c,d=[],h=e,b=$(e,"mx5-"+n),p=0;if(b&&((a=le.get(b))||(a={v:(a=b.match(fe)||t)[1],t:a[2],n:a[3],i:a[4]},le.set(b,a)),a=x({},a)),a&&!a.v||se[n]){if(!(c=h.c)){for(u=[h];h!=f&&(h=h.parentNode);){if(te[i=h.b]||(i=h.c)){c=i;break}u.push(h)}if(c)for(b of u)b.c=c}if(c){h=e.b,te[h]&&(p=c=h);do{if((r=te[c])&&(s=r.g)){if(l=(o=s.i)[n])for(h=l.length;h--;)o={r:i=l[h],v:c,n:i},i?!p&&e.matches(i)&&d.push(o):p&&d.unshift(o);if(s.tmpl&&!p)break;p=0}}while(r&&(c=r.pId))}}return a&&d.push(a),d},de=e=>{let t,n,r,i,o,l,f,{target:a,type:s}=e,u=[];for(;a&&1==a.nodeType&&!(e.cancelBubble||(n=a.d)&&n[s]);){if(n=1,u.push(a),(t=ce(a,s)).length){u.length=0;for(let{v:u,r:c,n:d,i:h,t:b}of t){if(!(i=(r=te[u])&&r.g)){0;break}i.h&&i.c&&((l=i[o=d+"\x1e"+s])&&(e.eventTarget=a,f=h?H(h,r.a):ue,e.params=f,A(l,e,i)),b||(a=i.root,n=0))}}n&&((i=(r=te[a.b])&&r.g)&&i.j[s]&&(u.length=0),a=a.parentNode)}for(a of u)(n=a.d||(a.d={}))[s]=1},he=(e,t,n)=>{let r=0|ae[e],i=n?-1:1;r&&n!==r||(n?_:Z)(f,e,de),ae[e]=r+i,t&&(se[e]=(0|se[e])+i)};let be={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","`":"&#96;"},pe=/[&<>"'\`]/g,me=e=>null==e?"":""+e,ge=e=>be[e],we=e=>me(e).replace(pe,ge),ye={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},ve=e=>ye[e],ke=/[!')(*]/g,Ve=e=>o(me(e)).replace(ke,ve),xe=/[\\'"]/g,Ie=e=>me(e).replace(xe,"\\$&"),je=(e,t,n)=>(e[n]=t,n),$e=(e,n,r)=>{if(e.c&&(r=e.tmpl)){let n,i=e.k,o=e.id,l=te[o],f={a:[],b:0},a=e.d,s=l.a;e.l=0,e.k={},n=r(a,Ae,o,me,Ve,s,je,Ie,p);let u=()=>{for(n of(r=f.c||!e.h,f.a))z(n.g,t,n,"\x1e"+n.id);r&&Ue(e)},c=()=>{if(e.m=n,e.n>1)e.n=1,u(),$e(e);else{for(n of(e.n=0,u(),i=e.o))n();i.length=0}};z(Ze,[e.root,e.m,n,f,l,i,e,c])}},Te={},Ae=(e,t,n,r,i)=>{let o;if(e){t=t||Te;let l,f,a,s,u,c,d="",h={},b=0,p="<"+e,m="",g=[];if(n)for(s of n){if(a=s.a,s.b==Ee){if(!a)continue;a=we(a)}m+=a,c&&s.b==Ee&&c.b==Ee?c.a+=s.a:(s.d&&(h[s.d]=(h[s.d]||0)+1,b++),l=l||s.e,c=s,g.push(s))}for(f in r=r||Te,t)!1!==(a=t[f])&&null!=a?(!0===a&&(t[f]=a=r[f]?a:""),"id"==f?d=a:"_"!=f||d?"mx5-view"==f&&a&&!d&&(d=e+"\x1e"+R(a).path):d=a,"value"==f&&"textarea"==e?m=a:B(Be,f)||(p+=` ${f}="${a&&we(a)}"`)):r[f]||delete t[f];u=p,o={a:p+=i?"/>":`>${m}</${e}>`,c:m,d:d,b:e,e:l||t.$,f:r,g:u,h:t,i:g,j:h,k:b,l:i}}else o={b:t?"\x1e":Ee,a:n+""};return o},Be={_:1,$:1};let Ee=e;let Ce=(e,t,n)=>{let r,i,o,l=0,f=n.f,a=t.f,s=n.h,u=t.h;if(t)for(r in u)B(s,r)||(l=1,(o=a[r])?e[o]="":e.removeAttribute(r));for(r in s)B(Be,r)||(i=s[r],(o=f[r])?t&&e[o]==i||(l=1,e[o]=i):t&&u[r]==i||(l=1,e.setAttribute(r,i)));return l},Ne=(e,t)=>{let n,i=e.b;return i==Ee?n=r.createTextNode(e.a):(n=r.createElementNS(t.namespaceURI,i),Ce(n,0,e),w(n,e.c)),n},Oe=(e,t,n,r,i)=>{let o,l,f,a,s={};for(o=r;o>=n;o--,i--)(f=(l=e[o]).d)&&(s[a="\x1e"+f]=(s[a]||0)+1,(l=s[f]||(s[f]=[])).push(t[i]));return s},Pe=(e,t)=>!e.d&&!t.d&&e.b==t.b||e.b==Ee&&t.b==Ee||"\x1e"==e.b||"\x1e"==t.b||e.d&&t.d==e.d,Ze=(e,t,n,r,i,o,l,f)=>{if(l.c){if(t){if(t.e||t.c!=n.c){let a,s,u,c,d,h=t.i,b=n.i,p=n.j,m=n.k,g=t.k,y=e.childNodes,v=0,k=h.length-1,V=0,x=b.length-1;0;let I=h[v],j=h[k],$=b[V],T=b[x],A=v,B=k;for(;v<=k&&V<=x;)if(I)if(j)if(Pe(I,$))r.b++,z(_e,[y[A],e,I,$,r,i,o,l,f]),p[I.d]&&(p[I.d]--,m--,(c=d&&d[I.d])&&--d["\x1e"+I.d]),A++,I=h[++v],$=b[++V];else if(Pe(j,T))r.b++,z(_e,[y[B],e,j,T,r,i,o,l,f]),p[j.d]&&(p[j.d]--,m--),B--,j=h[--k],T=b[--x];else if(Pe(I,T))s=y[A],e.insertBefore(s,y[B+1]),r.b++,z(_e,[s,e,I,T,r,i,o,l,f]),p[I.d]&&(p[I.d]--,m--),B--,I=h[++v],T=b[--x];else if(Pe($,j))s=y[B],e.insertBefore(s,y[A++]),r.b++,z(_e,[s,e,j,$,r,i,o,l,f]),p[j.d]&&(p[j.d]--,m--),j=h[--k],$=b[++V];else{if(!d&&m>0&&g>0&&(d=Oe(h,y,v,k,B)),(c=d&&d[$.d])&&(c=c[--d["\x1e"+$.d]])){if(u=I,c!=y[A]){for(s=v+1,a=A+1;s<=k;s++)if((u=h[s])&&y[a++]==c){h[s]=null;break}v--,e.insertBefore(c,y[A])}p[u.d]&&p[u.d]--,r.b++,z(_e,[c,e,u,$,r,i,o,l,f])}else d&&d[I.d]&&p[I.d]?(r.c=1,e.insertBefore(Ne($,e),y[A]),v--,B++):(r.b++,z(_e,[y[A],e,I,$,r,i,o,l,f]));++A,I=h[++v],$=b[++V]}else j=h[--k];else I=h[++v];for(a=V,s=1;a<=x;a++,s++)"\x1e"==(u=b[a]).b?w(e,u.a):e.insertBefore(Ne(u,e),y[B+s]),r.c=1;for(a=A;a<=B;a++)1==(u=y[A]).nodeType&&i.unmountZone(u),e.removeChild(u),r.c=1}}else r.c=1,w(e,n.c);r.b||f()}},_e=(e,t,n,r,i,o,l,f,a)=>{if(f.c){0;let s=n.h,u=r.h;if(n.e||n.a!=r.a)if("\x1e"==n.b||"\x1e"==r.b)i.c=1,w(t,r.a);else if(n.b==r.b){if(n.b==Ee)i.c=1,e.nodeValue=r.a;else if(!s._||s._!=u._){let t,c,d,h,b,p,m,g=u["mx5-view"],w=r.c,y=n.g!=r.g,v=te[e.b],k=g&&R(g);if(y&&(y=Ce(e,n,r))&&(i.c=1),g&&v&&v.f==k.path&&(h=v.g)){if(p=w!=n.c,m=g!=v.path,d=s.$,!p&&!m&&d)for(d of b=d.split(","))if("#"==d||B(l,d)){m=1;break}(m||p)&&(d=h.f,b=k.params,ne(v.pId,g,b),v.path=g,v.e=w,!1!==A(d,b,h)&&i.a.push(h),t=!h.tmpl)}else t=1,c=v;c&&(i.c=1,v.unmountVframe()),t&&!r.l&&Ze(e,n,r,i,o,l,f,a)}}else i.c=1,o.unmountZone(e),t.replaceChild(Ne(r,t),e);--i.b||a()}},Le=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,Se=(e,t,n)=>(e.a?n=e:((n=function(e,t){for(t of n.a)A(t,e,this)}).a=[e],n.b=1),n.a=n.a.concat(t.a||t),n),Ue=e=>{e.c&&(e.h=1,e.owner.mountZone())},Me=(e,t)=>{let n,{j:r,i:i,p:o,id:l}=e;for(n in r)he(n,i[n],t);for(n of(r=t?_:Z,o))r(n.a,n.b,n.c,l,n.d,e)},Re={win:n,doc:r};function Fe(...e){return x(this,...e),this}let He=(e,t,n)=>{let r,i,o,l,f={};for(i of e)for(r in i)o=i[r],l=f[r],"ctor"!=r?(Le.test(r)&&(l?o=Se(l,o):o.b=1),f[r]=o):n.push(o);for(r in f)B(t,r)||(t[r]=f[r])};function We(...e){let t=this.a||(this.a=[]);return He(e,this[c],t),this}let qe=e=>(function(...t){return A(e,t,this)});let De=e=>{if(!e["\x1e"]){e["\x1e"]=[];let t,n,r,i,o,l,f,a,s,u,d,h=e[c],b={},p=[],m={};for(f in h)if(t=h[f],n=f.match(Le))for(a of([,l,r,i,d]=n,u=d?S(d):{},i=i.split(","))){if(o=Re[r],s=1,l){if(o){p.push({c:t,a:o,b:a,d:u});continue}s=2,(o=m[a])||(o=m[a]=[]),o[r]||(o[r]=1,o.push(r))}b[a]=b[a]|s,(o=h[a=r+"\x1e"+a])?o.b&&(t.b?h[a]=Se(t,o):B(h,f)&&(h[a]=t)):h[a]=t}h.g=h.render=qe(h.render),h.j=b,h.p=p,h.i=m,h.f=h.assign}return e["\x1e"]};function ze(e,t,n,r){(r=this).root=t,r.owner=n,r.id=e,r.c=1,r.l=1,r.d={},r.k={},r.n=0,r.o=[]}x(ze,{merge:We,extend:function e(t){let n=this,r=(t=t||{}).ctor;function i(e,t,i,o,l,f,a,s){if(n.call(s=this,e,t,i,o),f=n.a)for(a of f)A(a,o,s);if(l)for(a of l)A(a,o,s);r&&A(r,o,s)}return i.merge=We,i.extend=e,i.static=Fe,X(i,n,t)}}),x(ze[c],{init:l,render:l,assign:l,observeLocation(e,t){let n;(n=this.a).a=1,b(e)&&(t=e.path,e=e.params),n.b=t,e&&(n.c=(e+"").split(","))},get(e,t){return t=this.d,e&&(t=t[e]),t},set(e,t){let n,r,i,o=this,l=o.d,f=o.k,a=o.l;for(i in e)n=e[i],r=l[i],v(n)&&r==n||B(t,i)||(f[i]=1,a=1),l[i]=n;return o.l=a,o},digest(e,t){return e=this.set(e,t),new Promise(t=>{e.l?(e.n++,e.o.push(t),1==e.n&&$e(e,1)):t()})},finale(){let e=this;return new Promise(t=>{e.n?e.o.push(t):t()})}});let Ge=0;export default{config:(e,t)=>(t=y,e&&(t=b(e)?x(t,e):t[e]),t),boot(e){Ge||(Ge=1,x(y,e),((e,t)=>(Q||(f=r.body,e=ee=y.rootId,(t=g(e))||(t=f),Q=new oe(t)),Q))().mountView(y.defaultView))},unboot(){Ge&&Q&&(Q.unmountVframe(),Q=null)},toMap:(e,t)=>{let n,r={};if(e)for(n of e)r[t&&n?n[t]:n]=t?n:1+(0|r[n]);return r},toTry:A,toUrl:(e,t,n)=>{let r,i,l,f=[];for(i in t)((r=t[i]+"")||B(n,i))&&(r=o(r),f.push(l=i+"="+r));return l&&(e+=(e&&(e.includes("?")?"&":"?"))+f.join("&")),e},parseUrl:R,guid:m,use:J,dispatch:(e,t,n)=>{let r=new Event(t,O);x(r,n),e.dispatchEvent(r)},guard:Y,type:h,has:B,inside:k,applyStyle:T,Cache:N,View:ze,Vframe:oe,mark:(e,t,n,r,i)=>(null!==e[i="\x1ea"]&&(n=e[i]||(e[i]={}),B(n,t)||(n[t]=0),r=++n[t]),n=>(n=e[i],n&&r===n[t])),unmark:V,node:g,task:z,taskFinale:()=>new Promise(e=>{z(e)})};